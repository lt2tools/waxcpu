var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(e,t,o)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))f.call(t,o)&&h(e,o,t[o]);if(g)for(var o of g(t))w.call(t,o)&&h(e,o,t[o]);return e};import{d as k,W as v,r as A,t as b,o as d,c as u,a,b as c,n as m,w as x,v as L,e as r,f as W,F as S,g as C}from"./vendor.1c9b05e1.js";const B=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};B();var J=(e,t)=>{const o=e.__vccOpts||e;for(const[l,n]of t)o[l]=n;return o};let y="3d4vu.wam";const N={name:"App",setup(){let e=new k.JsonRpc("https://wax.greymass.com"),t=new v({rpcEndpoint:"https://wax.greymass.com",tryAutoLogin:!0,waxAutoSigningURL:"https://api-idm.wax.io/v1/accounts/auto-accept/"});window.rpc=e,window.waxJs=t;const o=A({isLogin:0,wallet_username:null,balance:0,pack_selected:0,total:0,day:1});return p({},b(o))},async beforeCreate(){await waxJs.isAutoLoginAvailable()&&(this.wallet_username=waxJs.userAccount,this.isLogin=1),this.setPackSelected(1)},async created(){this.getBalance(),setInterval(this.getBalance,6e4)},methods:{async login(){if(waxJs){const e=await waxJs.login();e?(this.wallet_username=e,this.isLogin=1):this.isLogin=0}else alert("Not waxJs")},async logout(){this.wallet_username=null,this.isLogin=0},async getBalance(){const e=await rpc.get_currency_balance("eosio.token",y,"WAX");if(e[0]){const t=+e[0].split(" ")[0];this.balance=Math.floor(t)}},changeDay(){const e=parseInt(this.day);if(typeof e!="number"||isNaN(e)){this.day=0;return}e&&(this.day=e),this.setPackSelected(this.pack_selected)},async setPackSelected(e){this.pack_selected=e,this.total=e*this.day},numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},async stakeHandler(){if(!this.isLogin){alert("Pls login");return}try{if(waxJs){if(this.total<1){alert("Invalid amount or staked day! The minimum total value is 1.");return}const e=await waxJs.api.transact({actions:[{account:"eosio.token",name:"transfer",data:{from:this.wallet_username,to:y,amount:this.total,symbol:"WAX",memo:this.day,quantity:`${this.total.toFixed(8)} WAX`},authorization:[{actor:this.wallet_username,permission:"active"}]}]},{blocksBehind:3,expireSeconds:120});await this.getBalance(),alert(e?`Staked ${this.total*100/this.day} WAX for ${this.day} day(s) to ${this.wallet_username}!`:"Stake failed! Please try again!")}else alert("Not waxJs")}catch(e){await this.getBalance(),alert("Stake failed! Please try again!"),console.log(e)}},async test(){try{const e=await wax.api.transact({actions:[{account:"eosio",name:"delegatebw",authorization:[{actor:wax.userAccount,permission:"active"}],data:{from:wax.userAccount,receiver:wax.userAccount,stake_net_quantity:"0.00000001 WAX",stake_cpu_quantity:"0.00000000 WAX",transfer:!1,memo:"This is a WaxJS/Cloud Wallet Demo."}}]},{blocksBehind:3,expireSeconds:30})}catch(e){console.log(e.message)}}}},X=a("h1",{style:{"margin-top":"0"}},"WAX CPU - TRUNG NGUYEN",-1),P={key:1},T={style:{margin:"0","margin-bottom":"4px"}},E=r(" Welcome, "),O=a("p",{class:"current_wax_title"},"CURRENT WAX AVAILABLE",-1),R={class:"current_wax"},U={class:"recommendation_list"},z=a("strong",null,"100",-1),D=a("strong",null,"WAX",-1),I=[z,D],q=a("strong",null,"200",-1),F=a("strong",null,"WAX",-1),V=[q,F],H=a("strong",null,"300",-1),M=a("strong",null,"WAX",-1),G=[H,M],K=r(" Stake for "),Y=r(" TOTAL: "),j={style:{"font-size":"38px"}},Q=r(" WAX ");function Z(e,t,o,l,n,s){return d(),u(S,null,[X,e.isLogin?(d(),u("div",P,[a("p",T,[E,a("strong",null,c(e.wallet_username),1)]),a("button",{class:"button logout_button",onClick:t[1]||(t[1]=(...i)=>s.logout&&s.logout(...i))},"Logout")])):(d(),u("button",{key:0,class:"button login_button",onClick:t[0]||(t[0]=(...i)=>s.login&&s.login(...i))},"Login")),O,a("p",R,c(s.numberWithCommas(e.balance))+" WAX",1),a("div",U,[a("div",{class:m(["recommendation",[{selected:e.pack_selected==1}]]),onClick:t[2]||(t[2]=i=>s.setPackSelected(1))},I,2),a("div",{class:m(["recommendation",[{selected:e.pack_selected==2}]]),onClick:t[3]||(t[3]=i=>s.setPackSelected(2))},V,2),a("div",{class:m(["recommendation",[{selected:e.pack_selected==3}]]),onClick:t[4]||(t[4]=i=>s.setPackSelected(3))},G,2)]),a("div",null,[a("p",null,[K,a("span",null,[x(a("input",{class:"day_input","onUpdate:modelValue":t[5]||(t[5]=i=>e.day=i),onKeyup:t[6]||(t[6]=i=>s.changeDay())},null,544),[[L,e.day,void 0,{number:!0}]])]),r(" "+c(e.day>1?"days":"day"),1)]),a("h3",null,[Y,a("span",j,c(s.numberWithCommas(e.total)),1),Q])]),a("button",{class:"button stake_button",style:W([{backgroundColor:e.total>0?"#ffb334":"#626262"}]),onClick:t[7]||(t[7]=(...i)=>s.stakeHandler&&s.stakeHandler(...i))},"Stake now",4)],64)}var $=J(N,[["render",Z]]);window.global=window;C($).mount("#app");
